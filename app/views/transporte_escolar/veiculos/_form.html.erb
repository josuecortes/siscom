<!-- app/views/transporte_escolar/veiculos/_form.html.erb -->

<div class="modal-body">
  <%= form_for @veiculo, remote: true do |f| %>
    <% if @veiculo.errors.any? %>
      <div class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
        <h5><i class="icon fas fa-ban"></i> Ops! Algo deu errado.</h5>
      </div>
    <% end %>

    <div class="form-group">
      <%= f.label :procedencia, "Procedencia" %>
      <%= f.select :procedencia, @procedencias, { include_blank: "Selecione uma procedencia" }, { class: "form-control js-searchable select2-procedencia", required: true } %>
      <%= has_error(@veiculo, :procedencia) %>
    </div>

    <div class="form-group">
      <%= f.label :tipo, "Tipo de Veículo" %>
      <%= f.select :tipo, @tipos, { include_blank: "Selecione um tipo" }, { class: "form-control js-searchable select2-tipo", required: true } %>
      <%= has_error(@veiculo, :tipo) %>
    </div>

    <div class="form-group">
      <%= f.label :identificacao, "Identificação (Placa, nome, etc..)" %>
      <%= f.text_field :identificacao, class: "form-control", required: true %>
      <%= has_error(@veiculo, :identificacao) %>
    </div>

    <div class="form-group">
      <%= f.label :ano, "Ano" %>
      <%= f.text_field :ano, class: "form-control", required: false %>
      <%= has_error(@veiculo, :ano) %>
    </div>

    <div class="form-group">
      <%= f.label :modelo, "Modelo" %>
      <%= f.text_field :modelo, class: "form-control", required: false %>
      <%= has_error(@veiculo, :modelo) %>
    </div>

    <div class="form-group">
      <%= f.label :marca, "Marca" %>
      <%= f.text_field :marca, class: "form-control", required: false %>
      <%= has_error(@veiculo, :marca) %>
    </div>

    <div class="form-group">
      <%= f.label :capacidade_pessoas, "Capacidade de Pessoas (1 - 100)" %>
      <%= f.number_field :capacidade_pessoas, class: "form-control", required: true, min: 1, max: 100 %>
      <%= has_error(@veiculo, :capacidade_pessoas) %>
    </div>

    <div class="form-group">
      <%= f.label :capacidade_carga, "Capacidade de Carga" %>
      <%= f.select :capacidade_carga, @capacidade_de_cargas, { include_blank: "Selecione uma opção" }, { class: "form-control js-searchable select2-capacidade-carga", required: true } %>
      <%= has_error(@veiculo, :capacidade_carga) %>
    </div>

    <div class="form-group">
      <%= f.label :transportador_id, "Transportador" %>
      <%= f.select :transportador_id, @transportadores, { include_blank: "Selecione um transportador" }, { class: "form-control js-searchable select2-transportador", required: true } %>
      <%= has_error(@veiculo, :transportador_id) %>
    </div>

    <div class="form-group">
      <%= f.label :condutor_id, "Condutor" %>
      <%= f.select :condutor_id, @condutores, { include_blank: "Selecione um condutor" }, { class: "form-control js-searchable select2-condutor", required: true } %>
      <%= has_error(@veiculo, :condutor_id) %>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-success" data-disable-with="Salvar"><i class="icon fa fa-check"></i> Salvar</button>
      <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="icon fas fa-ban"></i> Cancelar</button>
    </div>
  <% end %>

  <script>
    $(document).ready(function() {
      $('.js-searchable').select2({
        placeholder: "Selecione",
        allowClear: true,
        theme: 'bootstrap',
        width: '100%'
      });
    });
  </script>
</div>
